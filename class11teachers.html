<!-- Class/class11teachers.html -->
<!DOCTYPE html>
<html>
<head>
  <title>Upload Test - Class 11</title>
   <link rel="stylesheet" href="teachersclass.css">
  <script type="module" src="../appwrite.js"></script>
</head>
<body>
  <h1 class="fixed-header">Upload Test - Class 11</h1>
  
  <div class="welcome-container">
    <button onclick="history.back()" class="cancel-btn" style="margin-bottom:20px;">Back</button>
    <form id="uploadForm">
      <div class="input-group">
        <label>Subject</label>
        <input type="text" id="subject" required placeholder="e.g. Chemistry">
      </div>
      <div class="input-group">
        <label>Teacher Name</label>
        <input type="text" id="teacher" required placeholder="e.g. Dr. Singh">
      </div>
      <div class="input-group">
        <label>Test Name</label>
        <input type="text" id="topic" required placeholder="e.g. Organic Chemistry Test">
      </div>
      <div class="input-group">
        <label>Upload PDF/Image</label>
        <input type="file" id="file" accept=".pdf,image/*" required>
      </div>
      <button type="submit" class="confirm-btn">UPLOAD TEST</button>
    </form>
    <div id="msg" style="margin-top:20px; font-weight:bold;"></div>
  </div>

  <script type="module">
    import { uploadTest } from '../appwrite.js';

    document.getElementById('uploadForm').onsubmit = async (e) => {
      e.preventDefault();
      const file = document.getElementById('file').files[0];
      const subject = document.getElementById('subject').value;
      const teacher = document.getElementById('teacher').value;
      const topic = document.getElementById('topic').value;

      if (!file) return alert("Select file");

      try {
        await uploadTest(file, "Class 11", subject, teacher, topic);
        document.getElementById('msg').innerHTML = "Uploaded Successfully!";
        e.target.reset();
      } catch (err) {
        document.getElementById('msg').innerHTML = "Upload failed: " + err.message;
      }
    };
  </script>
</body>
</html>
