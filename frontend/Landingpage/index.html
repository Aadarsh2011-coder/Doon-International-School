<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Doon International School Test Recorder</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <h1 class="fixed-header">Doon International School Jammu's Test Recorder</h1>

  <!-- Teacher Upload Icon -->
  <div class="teacher-portal-icon">
    <a href="teachers.html" class="teacher-icon-btn">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M12 12c2.21 0 4-1.79 4-4S14.21 4 12 4 8 5.79 8 8s1.79 4 4 4zM12 14c-2.67 0-8 
        1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        <path d="M17 10h-2v3h-2l3 3 3-3h-2z"/>
      </svg>
      <span class="teacher-label">TEACHERS</span>
    </a>
  </div>

  <!-- Welcome Section -->
  <div class="welcome-container">
    <h1>For the first time! Doon International School Jammu's Test Recorder on your device!</h1>
    <p>All your class tests of all subjects — all in one place!</p>

    <div class="button-container">
      <a href="#" class="class-button" data-class="9">Class 09</a>
      <a href="#" class="class-button" data-class="10">Class 10</a>
      <a href="#" class="class-button" data-class="11">Class 11</a>
      <a href="#" class="class-button" data-class="12">Class 12</a>
    </div>
  </div>

  <!-- Class View -->
  <div id="classView">
    <button class="back-button" onclick="goBack()">← Back to Home</button>
    <h2 id="classTitle"></h2>
    <div id="pdfs"></div>
  </div>

  <script>
    const welcomeContainer = document.querySelector('.welcome-container');
    const classView = document.getElementById('classView');
    const classTitle = document.getElementById('classTitle');
    const pdfsList = document.getElementById('pdfs');
    const classBtns = document.querySelectorAll('.class-button');

    classBtns.forEach(btn => {
      btn.onclick = (e) => {
        e.preventDefault();
        const cls = btn.dataset.class;

        welcomeContainer.style.display = 'none';
        classView.classList.add('active');
        classTitle.textContent = `Class ${cls}`;

        classBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const tests = JSON.parse(localStorage.getItem('tests') || '[]').filter(t => t.class === cls);
        if (tests.length === 0) {
          pdfsList.innerHTML = '<div class="no-tests"><p>No tests uploaded yet for this class.</p></div>';
        } else {
          pdfsList.innerHTML = tests.map(t => `
            <div class="test-card">
              <h3>${t.subject} - ${t.topic}</h3>
              <p><strong>Teacher:</strong> ${t.teacher}</p>
              <iframe src="${t.data}"></iframe>
              <a href="${t.data}" download="${t.fileName}">Download ${t.fileName}</a>
            </div>
          `).join('');
        }
      };
    });

    function goBack() {
      classView.classList.remove('active');
      welcomeContainer.style.display = 'flex';
      classBtns.forEach(b => b.classList.remove('active'));
    }
  </script>
</body>
</html>
